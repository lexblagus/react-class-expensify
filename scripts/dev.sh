#/bin/bash

# If any test fail, break the whole script
set -e

C='\033[1;33m'
NC='\033[0m' # No Color

echo ""
echo ""
echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░"
echo ""
echo "////////        ///////                                                        "
echo "   /////          /////                                                        "
echo "   ////           ////                                                         "
echo "  /////           ////                                                         "
echo "  /////           ////                                                         "
echo "  /////          /////                                                         "
echo "  ////           /////                                                         "
echo " /////           ////                                                          "
echo " /////           ////                             ///                          "
echo " ///// ////     /////     ///// ////     //////   //////////    ////     ///// "
echo " //// /   ///   /////   ////  / ////    ///   //// //  ////    /////   //   ///"
echo "//////    ///   ////   ////    ////    ////   ////     ////    ////   ///   ///"
echo "/////     ////  ////   ////    ////   /////   ////    /////    ////   ////  ///"
echo "////      //// /////  ////     ////   ////    ////    /////    ////   //////   "
echo "////     ///// ///// /////     ////   ////   /////    ////    /////   ///////  "
echo "////     ///// ////  /////     ///    ////   ////     ////    ////     /////// "
echo "////     ////  ////  /////    ////    ////   ///      ////    ////       ///// "
echo "///      //// /////  ////     ////  //   /////       /////   /////  ////  //// "
echo "///     ////  /////  ////    /////  //               ////    /////  ////   /// "
echo "///     ///   /////  ////    ////  /////////////     ////   ////// /////   /// "
echo "///    ///    ////  / ///   / /// / /////////////    ////  /  /// /  //   ///  "
echo " ///////       /////   /////   ///   ////////////     /////   ////    /////    "
echo "                                     ////////////                              "
echo "                                    //         //                              "
echo "                                   //          //                              "
echo "                                   //          /                               "
echo "                                   //         /                                "
echo "                                    //      //                                 "
echo "                                     ///////                                   "
echo ""
echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░"
echo ""
echo ""




echo "${C}▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄${NC}"
echo "${C}1/3: Lint${NC}"
echo "${C}▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀${NC}"
./node_modules/.bin/eslint ./src


echo "${C}▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄${NC}"
echo "${C}2/3: Jest${NC}"
echo "${C}▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀${NC}"
npm test
#cross-env NODE_ENV=test && \
#./node_modules/.bin/jest --forceExit --verbose --config="./jest.config.json"


echo "${C}▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄${NC}"
echo "${C}3/3: Webpack${NC}"
echo "${C}▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀${NC}"
./node_modules/.bin/webpack-dev-server --progress # --colors -client-log-level="info" # --watch-poll=0.1




echo "${C}░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░${NC}"
echo ""
echo ""
